# Milestone v2.1: Dashboard Polish & Gates View

**Status:** ✅ SHIPPED 2026-02-03
**Phases:** 19-21
**Total Plans:** 4

## Overview

Polish the dashboard experience by refactoring for maintainability, creating a dedicated gates management page, and fixing UX issues with action states and processing display.

## Phases

### Phase 19: Dashboard Refactoring

**Goal**: index.vue is maintainable with clear separation of concerns
**Depends on**: Nothing (first phase of milestone)
**Requirements**: ARCH-10, ARCH-11
**Success Criteria**:
  1. index.vue follows DRY principle with no duplicated logic
  2. Components are extracted where appropriate (computed data, handlers grouped logically)
  3. Template sections map clearly to single-responsibility components
  4. Code is easier to modify for DASH-06/07/08 changes
**Plans**: 1 plan

Plans:
- [x] 19-01-PLAN.md — Create useDashboardData composable and refactor index.vue

### Phase 20: Gates View

**Goal**: Staff can manage all gates from a dedicated /gates page
**Depends on**: Phase 19 (clean codebase)
**Requirements**: GATE-14, GATE-15, GATE-16, GATE-17
**Success Criteria**:
  1. /gates route exists and is accessible from sidebar
  2. Gates table shows all gates with their current status (active/inactive, queue count)
  3. Each gate row links to the gate operator view (/gate/[id])
  4. Staff can create new gates from the /gates page
  5. Staff can enable/disable gates from the /gates page
**Plans**: 1 plan

Plans:
- [x] 20-01-PLAN.md — Create gates page with table and management functionality

### Phase 21: Dashboard Polish

**Goal**: Dashboard has clean UX with correct action states and processing display
**Depends on**: Phase 19 (refactored dashboard), Phase 20 (gates management moved)
**Requirements**: DASH-06, DASH-07, DASH-08, FIX-01, FIX-02
**Success Criteria**:
  1. Dashboard tabs contain only queue filtering (All, Gate 1, Gate 2, etc.) — no "Manage Gates"
  2. "Now processing" section shows a table with one row per active gate
  3. Processing table shows order info when gate is busy, "Idle" when gate has no processing order
  4. Processing orders in DataTable show Complete + Return to Queue actions (not assign to gate)
  5. Cancel action appears as secondary (outline/ghost) throughout all order states
**Plans**: 2 plans

Plans:
- [x] 21-01-PLAN.md — Update dashboard tabs and processing section
- [x] 21-02-PLAN.md — Fix DataTable action button states

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 19. Dashboard Refactoring | 1/1 | ✓ Complete | 2026-02-03 |
| 20. Gates View | 1/1 | ✓ Complete | 2026-02-03 |
| 21. Dashboard Polish | 2/2 | ✓ Complete | 2026-02-03 |

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale |
|----------|-----------|
| Extract dashboard computed properties to dedicated composable | DRY principle - computed properties were complex and cluttered index.vue |
| Use section comments (// === Name ===) for code organization | Improves scanability and makes handler grouping explicit |
| Table layout with 5 columns for gates | Consistent with other table views in app |
| Check both IN_QUEUE and PROCESSING statuses before disabling gate | Prevents orphaning orders being processed |
| Table layout for processing section with one row per active gate | Shows all gates at once, clear idle vs busy state |
| Rename components for clarity | NowProcessingSection→ProcessingGatesTable, DataTable→RequestsTable, ActionButtons→RequestActionButtons |
| Both tables use same RequestActionButtons component | Consistent action pattern across UI |

**Issues Resolved:**

- Dashboard was cluttered with gate management in tabs
- Processing orders had confusing action buttons (same as queued orders)
- No dedicated page to see/manage all gates at once
- index.vue was 410 lines with duplicated logic

**Technical Debt:**

- requestsTableColumns.ts has TODO for removing backward-compat re-exports
- Pre-existing type errors (native-select, pinia import, database types)

---

*Archived: 2026-02-03 as part of v2.1 milestone completion*
*For current project status, see .planning/ROADMAP.md*
