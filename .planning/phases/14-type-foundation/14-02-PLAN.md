---
phase: 14-type-foundation
plan: 02
type: execute
wave: 2
depends_on: ["14-01"]
files_modified:
  - staff/app/components/dashboard/columns.ts
  - staff/app/components/dashboard/StatusBadge.vue
  - staff/app/components/dashboard/ActionButtons.vue
  - staff/app/components/dashboard/RequestDetail.vue
  - staff/app/components/gate/CurrentPickup.vue
autonomous: true

must_haves:
  truths:
    - "StatusBadge uses PICKUP_STATUS constants for comparisons"
    - "ActionButtons uses PickupStatus type for status prop"
    - "columns.ts re-exports types from #shared for backward compatibility"
    - "No magic strings remain in dashboard component files"
  artifacts:
    - path: "staff/app/components/dashboard/columns.ts"
      provides: "Re-exports from #shared, uses ACTIVE_STATUSES"
      contains: "from '#shared/types/pickup-request'"
    - path: "staff/app/components/dashboard/StatusBadge.vue"
      provides: "Status badge with typed props"
      contains: "PICKUP_STATUS"
    - path: "staff/app/components/dashboard/ActionButtons.vue"
      provides: "Action buttons with typed status"
      contains: "PickupStatus"
  key_links:
    - from: "staff/app/components/dashboard/columns.ts"
      to: "#shared/types/pickup-request"
      via: "re-export and import"
      pattern: "export.*from '#shared/types/pickup-request'"
    - from: "staff/app/components/dashboard/StatusBadge.vue"
      to: "#shared/types/pickup-request"
      via: "import PICKUP_STATUS"
      pattern: "import.*PICKUP_STATUS.*from '#shared"
---

<objective>
Migrate staff dashboard components to use centralized type definitions.

Purpose: Replace magic strings in dashboard components with typed constants from #shared/types.
Output: All 5 dashboard-related component files use imports from #shared instead of inline types.
</objective>

<execution_context>
@/Users/thomas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/thomas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14-type-foundation/14-01-SUMMARY.md

# Files to migrate
@staff/app/components/dashboard/columns.ts
@staff/app/components/dashboard/StatusBadge.vue
@staff/app/components/dashboard/ActionButtons.vue
@staff/app/components/dashboard/RequestDetail.vue
@staff/app/components/gate/CurrentPickup.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate columns.ts with re-exports</name>
  <files>staff/app/components/dashboard/columns.ts</files>
  <action>
Update columns.ts to:

1. Add re-exports for backward compatibility (other files may still import from here):
   ```typescript
   // Re-export for backward compatibility - TODO: update imports elsewhere then remove
   export type { PickupRequest, PickupStatus } from '#shared/types/pickup-request'
   export { PICKUP_STATUS, ACTIVE_STATUSES } from '#shared/types/pickup-request'
   ```

2. Add local import for use within the file:
   ```typescript
   import type { PickupRequest } from '#shared/types/pickup-request'
   import { ACTIVE_STATUSES } from '#shared/types/pickup-request'
   ```

3. Remove the inline `PickupRequest` interface definition (lines ~9-22)

4. Update the `isActive` check in the gate column cell:
   Change: `['pending', 'approved', 'in_queue', 'processing'].includes(status)`
   To: `(ACTIVE_STATUSES as readonly string[]).includes(status)`

Keep ColumnCallbacks interface (it's local to this file, not shared).
  </action>
  <verify>
Run `npx nuxi typecheck staff` - should pass with no type errors related to columns.ts
  </verify>
  <done>
columns.ts has no inline PickupRequest interface, uses ACTIVE_STATUSES for filtering, and re-exports types from #shared.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate StatusBadge, ActionButtons, RequestDetail, CurrentPickup</name>
  <files>
staff/app/components/dashboard/StatusBadge.vue
staff/app/components/dashboard/ActionButtons.vue
staff/app/components/dashboard/RequestDetail.vue
staff/app/components/gate/CurrentPickup.vue
  </files>
  <action>
Update each file to use typed constants:

**StatusBadge.vue:**
1. Import: `import type { PickupStatus } from '#shared/types/pickup-request'`
2. Import: `import { PICKUP_STATUS } from '#shared/types/pickup-request'`
3. Change props type: `status: PickupStatus` (auto-imported, but explicit import is clearer)
4. Replace all status comparisons:
   - `props.status === 'processing'` -> `props.status === PICKUP_STATUS.PROCESSING`
   - `props.status === 'pending'` -> `props.status === PICKUP_STATUS.PENDING`
5. Keep variantMap and labelMap with string keys (they're local display logic)

**ActionButtons.vue:**
1. Import: `import type { PickupStatus } from '#shared/types/pickup-request'`
2. Import: `import { PICKUP_STATUS } from '#shared/types/pickup-request'`
3. Update props type if it has inline status union
4. Replace status comparisons with PICKUP_STATUS constants

**RequestDetail.vue:**
1. Import: `import { ACTIVE_STATUSES } from '#shared/types/pickup-request'`
2. Replace any `['pending', 'approved', ...].includes()` with ACTIVE_STATUSES

**CurrentPickup.vue:**
1. Import: `import type { PickupStatus } from '#shared/types/pickup-request'`
2. Update any props or computed that reference status type
  </action>
  <verify>
Run `npx nuxi typecheck staff` - all type errors resolved
Grep for magic strings: `grep -E "'pending'|'approved'|'in_queue'" staff/app/components/dashboard/` should return no matches
  </verify>
  <done>
All 4 component files import from #shared and use PICKUP_STATUS constants instead of magic strings.
  </done>
</task>

</tasks>

<verification>
1. `npx nuxi typecheck staff` passes
2. `grep -rE "'pending'|'approved'|'in_queue'|'processing'|'completed'|'cancelled'" staff/app/components/dashboard/` returns no matches
3. `grep -rE "'pending'|'approved'" staff/app/components/gate/CurrentPickup.vue` returns no matches
4. All files import from '#shared/types/pickup-request'
</verification>

<success_criteria>
- columns.ts has no inline PickupRequest interface
- StatusBadge uses PICKUP_STATUS.PROCESSING, PICKUP_STATUS.PENDING
- ActionButtons uses PickupStatus type for props
- RequestDetail uses ACTIVE_STATUSES for filtering
- CurrentPickup uses PickupStatus type
- No magic status strings in any of the 5 files
</success_criteria>

<output>
After completion, create `.planning/phases/14-type-foundation/14-02-SUMMARY.md`
</output>
