---
phase: 17-dashboard-visualization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - staff/app/components/ui/chart/*
  - staff/app/plugins/ssr-width.ts
  - staff/package.json
autonomous: true

must_haves:
  truths:
    - "Chart components are available for import in Vue files"
    - "SSR hydration mismatch is prevented by width plugin"
  artifacts:
    - path: "staff/app/components/ui/chart/index.ts"
      provides: "Chart component exports"
    - path: "staff/app/plugins/ssr-width.ts"
      provides: "SSR width plugin for charts"
  key_links:
    - from: "staff/app/plugins/ssr-width.ts"
      to: "@vueuse/core"
      via: "provideSSRWidth import"
      pattern: "provideSSRWidth"
---

<objective>
Install shadcn-vue chart components and Unovis for bar chart visualization, plus SSR hydration fix.

Purpose: Charts require specific dependencies (Unovis) and SSR handling to render correctly in Nuxt.
Output: Chart components ready for use, SSR plugin configured.
</objective>

<execution_context>
@/Users/thomas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/thomas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/17-dashboard-visualization/17-RESEARCH.md
@staff/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install chart dependencies</name>
  <files>
    staff/package.json
    staff/app/components/ui/chart/*
  </files>
  <action>
    Install Unovis Vue package and shadcn-vue chart component:

    1. Run `pnpm add @unovis/vue` in staff/ directory
    2. Run `pnpm dlx shadcn-vue@latest add chart` in staff/ directory
       - This generates chart components into components/ui/chart/
       - Includes ChartContainer, ChartTooltip, ChartTooltipContent, ChartLegend, etc.

    Note: The chart component uses Unovis under the hood for visualization primitives.
  </action>
  <verify>
    - `cat staff/package.json | grep -E "@unovis/vue"` shows dependency installed
    - `ls staff/app/components/ui/chart/` shows chart component files
  </verify>
  <done>
    @unovis/vue in dependencies, chart components exist in ui/chart/
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SSR width plugin</name>
  <files>staff/app/plugins/ssr-width.ts</files>
  <action>
    Create Nuxt plugin that provides SSR width for chart hydration:

    ```typescript
    // staff/app/plugins/ssr-width.ts
    import { provideSSRWidth } from '@vueuse/core'

    export default defineNuxtPlugin((nuxtApp) => {
      // Provide consistent width during SSR to prevent hydration mismatch
      // 1024px is a reasonable default for desktop-first charts
      provideSSRWidth(1024, nuxtApp.vueApp)
    })
    ```

    This prevents charts from rendering with different widths on server vs client.
  </action>
  <verify>
    - `cat staff/app/plugins/ssr-width.ts` shows plugin with provideSSRWidth
    - `cd staff && pnpm nuxi typecheck 2>&1 | grep -v "native-select"` passes (pre-existing native-select errors are known)
  </verify>
  <done>
    SSR width plugin exists and type-checks
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify chart imports work</name>
  <files>None (verification only)</files>
  <action>
    Verify the chart components can be imported without errors:

    1. Run `cd staff && pnpm nuxi prepare` to regenerate auto-imports
    2. Run `cd staff && pnpm nuxi typecheck 2>&1 | grep -v "native-select"` to verify types
    3. Confirm chart component exports are available (ChartContainer, ChartTooltip, etc.)

    Note: If shadcn-vue chart component is installed but auto-imports not working,
    may need to check components/ui/chart/index.ts exports.
  </action>
  <verify>
    - `cd staff && pnpm nuxi prepare` completes without error
    - `cd staff && pnpm nuxi typecheck 2>&1 | grep -v "native-select" | grep -i error | wc -l` returns 0 (no new errors)
  </verify>
  <done>
    Chart components type-check and auto-imports work
  </done>
</task>

</tasks>

<verification>
Run these checks after all tasks:
1. `cat staff/package.json | grep "@unovis"` - Unovis installed
2. `ls staff/app/components/ui/chart/` - Chart component files exist
3. `cat staff/app/plugins/ssr-width.ts` - SSR plugin exists
4. `cd staff && pnpm nuxi typecheck 2>&1 | grep -v "native-select" | grep -i error` - No new type errors
</verification>

<success_criteria>
- @unovis/vue is in package.json dependencies
- Chart components exist in staff/app/components/ui/chart/
- SSR width plugin exists at staff/app/plugins/ssr-width.ts
- Type check passes (excluding pre-existing native-select errors)
</success_criteria>

<output>
After completion, create `.planning/phases/17-dashboard-visualization/17-01-SUMMARY.md`
</output>
