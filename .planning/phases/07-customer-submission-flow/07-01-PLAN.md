---
phase: 07-customer-submission-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - customer/nuxt.config.ts
  - customer/package.json
  - customer/components.json
  - customer/app/assets/css/tailwind.css
  - customer/app/layouts/default.vue
  - customer/app/pages/index.vue
  - customer/app/lib/utils.ts
  - customer/app/components/ui/*
  - customer/.env.example
autonomous: true

must_haves:
  truths:
    - "Customer app runs on dev server without errors"
    - "Tailwind CSS styles are applied"
    - "shadcn-vue components render correctly"
  artifacts:
    - path: "customer/nuxt.config.ts"
      provides: "Nuxt configuration with Supabase (anon) and Tailwind"
      contains: "@nuxtjs/supabase"
    - path: "customer/app/layouts/default.vue"
      provides: "Mobile-first layout wrapper"
      min_lines: 10
    - path: "customer/app/pages/index.vue"
      provides: "Main page placeholder"
      min_lines: 5
    - path: "customer/app/lib/utils.ts"
      provides: "cn() utility for class names"
      exports: ["cn"]
  key_links:
    - from: "customer/nuxt.config.ts"
      to: "@nuxtjs/supabase"
      via: "modules array"
      pattern: "modules.*@nuxtjs/supabase"
---

<objective>
Initialize a separate Nuxt 4 customer application with mobile-first design and shadcn-vue components.

Purpose: Establish the customer-facing frontend scaffold that will host the pickup request submission form. This app is separate from staff/ to maintain clean separation of concerns and different auth requirements (customer app uses anonymous access).

Output: Working Nuxt 4 app in `customer/` directory with Supabase module (anon-only), Tailwind CSS, and shadcn-vue UI components.
</objective>

<execution_context>
@/Users/thomas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/thomas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-customer-submission-flow/07-RESEARCH.md

# Reference for patterns to follow
@staff/nuxt.config.ts
@staff/components.json
@staff/app/lib/utils.ts
@staff/app/layouts/default.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Nuxt 4 app with dependencies</name>
  <files>
    customer/nuxt.config.ts
    customer/package.json
    customer/tsconfig.json
    customer/components.json
    customer/app/assets/css/tailwind.css
    customer/app/lib/utils.ts
    customer/.gitignore
    customer/.env.example
  </files>
  <action>
Create a new Nuxt 4 application in the `customer/` directory:

1. Initialize with `pnpx nuxi init customer` using the minimal template
2. Install dependencies:
   ```bash
   cd customer
   pnpm add @nuxtjs/supabase@^2.0.3 vee-validate@^4.15.1 @vee-validate/zod@^4.15.1 zod@^3.25.76 shadcn-nuxt@^2.4.3 nuxt-api-shield date-fns @date-fns/tz
   pnpm add -D @tailwindcss/vite
   ```
3. Configure nuxt.config.ts:
   - Add modules: `@nuxtjs/supabase`, `shadcn-nuxt`, `nuxt-api-shield`
   - Configure Supabase WITHOUT auth redirects (anon-only access for customers)
   - Configure Tailwind via @tailwindcss/vite plugin
   - Configure components to ignore index.ts files
   - Configure nuxt-api-shield with rate limiting for /api/submit route (5 attempts per 60s window, 300s ban)

4. Create components.json (copy from staff/, adjust paths for customer/)
5. Create app/assets/css/tailwind.css with Tailwind directives and CSS variables (copy from staff/)
6. Create app/lib/utils.ts with cn() helper (copy from staff/)
7. Create .gitignore (copy from staff/)
8. Create .env.example documenting SUPABASE_URL and SUPABASE_KEY (anon key only)

Important: The customer app does NOT need auth configuration. Remove all redirectOptions from supabase config.
  </action>
  <verify>
    cd customer && pnpm install && pnpm dev
    # Dev server starts without errors
  </verify>
  <done>
    Nuxt dev server runs on localhost:3001 (or next available port) without build errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Add shadcn-vue components and layouts</name>
  <files>
    customer/app/layouts/default.vue
    customer/app/pages/index.vue
    customer/app/app.vue
    customer/app/components/ui/button/*
    customer/app/components/ui/card/*
    customer/app/components/ui/input/*
    customer/app/components/ui/label/*
    customer/app/components/ui/form/*
  </files>
  <action>
1. Initialize shadcn-vue:
   ```bash
   cd customer
   pnpx shadcn-vue@latest init
   ```
   Select: new-york style, neutral base color

2. Add required UI components:
   ```bash
   pnpx shadcn-vue@latest add button card input label form
   ```

3. Create app/app.vue with NuxtLayout and NuxtPage (copy pattern from staff/)

4. Create app/layouts/default.vue:
   - Mobile-first centered layout
   - max-w-md container centered with padding
   - Simple header with "Warehouse Pickup" title
   - No navigation (single-page app)

5. Create app/pages/index.vue:
   - Basic placeholder with "Pickup Request" heading
   - Will be replaced with form in Plan 03

The layout should be optimized for mobile devices (QR code scan scenario):
- Large touch targets (h-12 for inputs/buttons)
- Readable text sizes (text-base minimum)
- Adequate padding for thumb reach
  </action>
  <verify>
    cd customer && pnpm dev
    # Visit http://localhost:3001
    # Page renders with styled layout and placeholder content
  </verify>
  <done>
    Customer app shows styled page with Card component and mobile-friendly layout
  </done>
</task>

</tasks>

<verification>
```bash
# Verify customer app structure
ls -la customer/
ls -la customer/app/components/ui/

# Verify dev server
cd customer && pnpm dev &
sleep 5
curl -s http://localhost:3001 | grep -q "Pickup" && echo "Page renders correctly"

# Verify dependencies
cd customer && pnpm list @nuxtjs/supabase nuxt-api-shield date-fns
```
</verification>

<success_criteria>
1. customer/ directory exists with Nuxt 4 app structure
2. Dev server runs without errors
3. shadcn-vue components (button, card, input, label, form) installed
4. Layout is mobile-first with centered card design
5. Supabase module configured for anonymous access (no auth redirects)
6. nuxt-api-shield module configured with rate limiting
</success_criteria>

<output>
After completion, create `.planning/phases/07-customer-submission-flow/07-01-SUMMARY.md`
</output>
